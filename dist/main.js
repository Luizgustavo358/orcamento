/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={720:function(e,a){!function(r,t){var n={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},o=Array.prototype.map,c=Array.isArray,s=Object.prototype.toString;function i(e){return!!(""===e||e&&e.charCodeAt&&e.substr)}function l(e){return c?c(e):"[object Array]"===s.call(e)}function u(e){return e&&"[object Object]"===s.call(e)}function d(e,a){var r;for(r in e=e||{},a=a||{})a.hasOwnProperty(r)&&null==e[r]&&(e[r]=a[r]);return e}function p(e,a,r){var t,n,c=[];if(!e)return c;if(o&&e.map===o)return e.map(a,r);for(t=0,n=e.length;t<n;t++)c[t]=a.call(r,e[t],t,e);return c}function f(e,a){return e=Math.round(Math.abs(e)),isNaN(e)?a:e}function m(e){var a=n.settings.currency.format;return"function"==typeof e&&(e=e()),i(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e&&e.pos&&e.pos.match("%v")?e:i(a)?n.settings.currency.format={pos:a,neg:a.replace("%v","-%v"),zero:a}:a}var v=n.unformat=n.parse=function(e,a){if(l(e))return p(e,(function(e){return v(e,a)}));if("number"==typeof(e=e||0))return e;a=a||n.settings.number.decimal;var r=new RegExp("[^0-9-"+a+"]",["g"]),t=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(r,"").replace(a,"."));return isNaN(t)?0:t},h=n.toFixed=function(e,a){a=f(a,n.settings.number.precision);var r=Math.pow(10,a);return(Math.round(n.unformat(e)*r)/r).toFixed(a)},g=n.formatNumber=n.format=function(e,a,r,t){if(l(e))return p(e,(function(e){return g(e,a,r,t)}));e=v(e);var o=d(u(a)?a:{precision:a,thousand:r,decimal:t},n.settings.number),c=f(o.precision),s=e<0?"-":"",i=parseInt(h(Math.abs(e||0),c),10)+"",m=i.length>3?i.length%3:0;return s+(m?i.substr(0,m)+o.thousand:"")+i.substr(m).replace(/(\d{3})(?=\d)/g,"$1"+o.thousand)+(c?o.decimal+h(Math.abs(e),c).split(".")[1]:"")},b=n.formatMoney=function(e,a,r,t,o,c){if(l(e))return p(e,(function(e){return b(e,a,r,t,o,c)}));e=v(e);var s=d(u(a)?a:{symbol:a,precision:r,thousand:t,decimal:o,format:c},n.settings.currency),i=m(s.format);return(e>0?i.pos:e<0?i.neg:i.zero).replace("%s",s.symbol).replace("%v",g(Math.abs(e),f(s.precision),s.thousand,s.decimal))};n.formatColumn=function(e,a,r,t,o,c){if(!e)return[];var s=d(u(a)?a:{symbol:a,precision:r,thousand:t,decimal:o,format:c},n.settings.currency),h=m(s.format),b=h.pos.indexOf("%s")<h.pos.indexOf("%v"),y=0,M=p(e,(function(e,a){if(l(e))return n.formatColumn(e,s);var r=((e=v(e))>0?h.pos:e<0?h.neg:h.zero).replace("%s",s.symbol).replace("%v",g(Math.abs(e),f(s.precision),s.thousand,s.decimal));return r.length>y&&(y=r.length),r}));return p(M,(function(e,a){return i(e)&&e.length<y?b?e.replace(s.symbol,s.symbol+new Array(y-e.length+1).join(" ")):new Array(y-e.length+1).join(" ")+e:e}))},e.exports&&(a=e.exports=n),a.accounting=n}()}},a={};function r(t){var n=a[t];if(void 0!==n)return n.exports;var o=a[t]={exports:{}};return e[t].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return r.d(a,{a}),a},r.d=(e,a)=>{for(var t in a)r.o(a,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},r.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{"use strict";var e=r(720),a=r.n(e);class t{constructor(e){this.chave=e}listar=()=>new Promise(((e,a)=>{setTimeout((()=>{const a=localStorage.getItem(this.chave);e(a?JSON.parse(a):[])}),400)}));salvar=e=>new Promise((a=>{setTimeout((()=>{localStorage.setItem(this.chave,JSON.stringify(e)),a()}),400)}))}(async()=>{const e=new t("despesas"),r=new t("receitas"),n=(()=>{const e=document.getElementById("form-adicionar-receita"),a=document.getElementById("form-adicionar-despesa");return{cabecalho:{saldo:document.getElementById("saldo"),principal:document.getElementById("progresso-principal"),categorias:document.getElementById("progresso-categoria"),visaoGeral:document.getElementById("visao-geral")},receita:{tabela:document.getElementById("tabela-receitas"),form:e,campos:{descricao:e.querySelector("[name=descricao]"),valor:e.querySelector("[name=valor]")}},despesa:{tabela:document.getElementById("tabela-despesas"),form:a,campos:{descricao:a.querySelector("[name=descricao]"),valor:a.querySelector("[name=valor]"),categoria:a.querySelector("[name=categoria]")}}}})(),o=[{identificador:"lazer",descricao:"Lazer",previsto:320},{identificador:"alimentacao",descricao:"Alimentação",previsto:800},{identificador:"moradia",descricao:"Moradia",previsto:700},{identificador:"transporte",descricao:"Transporte",previsto:500}],c=function(e,a){return e.reduce((function(e,r){return(e[r[a]]=e[r[a]]||[]).push(r),e}),{})},s=function(e,a,r){return Array(a-String(e).length+1).join(r||"0")+e},i=function(e){let a=e;return"string"==typeof e&&(a=new Date(e)),`${s(a.getDate(),2)}/${s(a.getMonth()+1,2)}`},l=function(e,a){return new Date(a)<new Date(e)?-1:new Date(a)>new Date(e)?1:0},u=function(){const e=c(g,"data");n.despesa.tabela.innerHTML="",Object.keys(e).sort(l).forEach((function(r){n.despesa.tabela.innerHTML+=`\n                <tr>\n                    <td class="coluna-data" colspan="2">\n                        ${i(r)}\n                    </td>\n                </tr>`,e[r].forEach((function(e){n.despesa.tabela.innerHTML+=function(e){const r=(t=e.categoria,o.find((function(e){return e.identificador==t}))).descricao;var t;return`\n        <tr>\n            <td class="coluna-descricao-transacao">\n                ${e.descricao}\n                <p class="categoria-label">${r}</p>\n            </td>\n            <td class="coluna-valor-transacao">\n                ${a().formatMoney(e.valor,"R$ ",2,".",",")}\n            </td>\n        </tr>\n        `}(e)}))}))},d=function(){const e=c(v,"data");n.receita.tabela.innerHTML="",Object.keys(e).sort(l).forEach((function(r){n.receita.tabela.innerHTML+=`\n                <tr>\n                    <td class="coluna-data" colspan="2">\n                        ${i(r)}\n                    </td>\n                </tr>`,e[r].forEach((function(e){n.receita.tabela.innerHTML+=function(e){return`\n        <tr>\n            <td class="coluna-descricao-transacao">\n                ${e.descricao}\n                <p class="categoria-label">Receita</p>\n            </td>\n            <td class="coluna-valor-transacao">\n                ${a().formatMoney(e.valor,"R$ ",2,".",",")}\n            </td>\n        </tr>\n        `}(e)}))}))},p=function(e,r){let t=0;return r.hasOwnProperty(e.identificador)&&(t=r[e.identificador]),`\n        <div>\n            <h5>\n                <span class="ofuscado">${e.descricao} ${a().formatMoney(t,"R$ ",2,".",",")}</span>\n            </h5>\n            <progress value="${t}" max="${e.previsto}"></progress>\n        </div>\n        `},f=function(e){return`\n        <div class="visao-geral-container">\n            <h5>\n                <span class="ofuscado">${e.descricao}</span>\n            </h5>\n            <span class="texto-grande">${a().formatMoney(e.valor,"R$ ",2,".",",")}</span>\n        </div>`},m=function(){const e=function(){const e=g.reduce((function(e,a){return e.hasOwnProperty(a.categoria)||(e[a.categoria]=0),e[a.categoria]+=Number.parseFloat(a.valor),e.despesas+=Number.parseFloat(a.valor),e}),{despesas:0}),a=v.reduce((function(e,a){return e+Number.parseFloat(a.valor)}),0);return{...e,receitas:a,total:a-e.despesas}}();!function(e){const a=o.reduce((function(e,a){return e+a.previsto}));n.cabecalho.principal.innerHTML="",n.cabecalho.principal.innerHTML+=p({descricao:"Receitas",identificador:"receitas",previsto:4e3},e),n.cabecalho.principal.innerHTML+=p({descricao:"Despesas",identificador:"despesas",previsto:a},e)}(e),function(e){n.cabecalho.categorias.innerHTML="",o.forEach((function(a){n.cabecalho.categorias.innerHTML+=p(a,e)}))}(e),function({receitas:e,despesas:a,total:r}){n.cabecalho.visaoGeral.innerHTML="",n.cabecalho.visaoGeral.innerHTML+=f({descricao:"Receitas",valor:e}),n.cabecalho.visaoGeral.innerHTML+=f({descricao:"Despesas",valor:a}),n.cabecalho.visaoGeral.innerHTML+=f({descricao:"Economia",valor:r})}(e);const{total:r}=e;n.cabecalho.saldo.innerHTML=a().formatMoney(r,"R$ ",2,".",",")};let v=[];const h=r.listar();h.then((function(e){v=e,d()}));let g=[];const b=e.listar();b.then((function(e){g=e,u()})),await Promise.all([h,b]),m(),o.forEach((function(e){n.despesa.form.categoria.appendChild(function(e){const a=document.createElement("option");return a.innerHTML=e.descricao,a.value=e.identificador,a}(e))})),n.receita.form.onsubmit=async e=>{e.preventDefault();const a={data:new Date((new Date).setHours(0,0,0,0)).toISOString()};Object.keys(n.receita.campos).forEach((function(e){const{value:r}=n.receita.campos[e];a[e]=r})),v.push(a);try{await r.salvar(v),n.receita.form.reset(),d(),m(),alert("Receita salva com sucesso!")}catch{alert("Ocorreu um erro ao salvar a Receita.")}},n.despesa.form.onsubmit=async a=>{a.preventDefault();const r={data:new Date((new Date).setHours(0,0,0,0)).toISOString()};Object.keys(n.despesa.campos).forEach((function(e){const{value:a}=n.despesa.campos[e];r[e]=a})),g.push(r);try{await e.salvar(g),n.despesa.form.reset(),u(),m(),alert("Despesa salva com sucesso!")}catch{alert("Ocorreu um erro ao salvar a Despesa.")}}})()})()})();